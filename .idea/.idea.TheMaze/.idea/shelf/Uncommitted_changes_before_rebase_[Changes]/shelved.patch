Index: TheMaze/Raycasting.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using System.Numerics;\r\nusing System;\r\n\r\nnamespace TheMaze;\r\n\r\npublic class Raycasting\r\n{\r\n    public int ScaleX;\r\n    public Field Maze;\r\n    public Player Player;\r\n    public float TileSize;\r\n    public int WinWidth;\r\n    public int WinHeight;\r\n    public float FOV;\r\n    public int RaysCounter;\r\n    public int MaxDepth;\r\n    public float DeltaAngle;\r\n\r\n\r\n    public void MazeGen() => Maze.GenerateMaze();\r\n    public void TurnLeft(float delta) => Player.Angle += delta;\r\n    public void TurnRight(float delta) => Player.Angle -= delta;\r\n\r\n    public void Move(Vector2 direction, float delta)\r\n    {\r\n        var possiblePos = Player.Pos + direction.RotateRadians(Player.Angle) * delta;\r\n        if (Maze.Map[(int) (Math.Floor(possiblePos.X) / TileSize),\r\n                (int) (Math.Floor(possiblePos.Y) / TileSize)].Value == TypeOfSpace.Wall) return;\r\n        Player.Pos += direction.RotateRadians(Player.Angle) * delta * 2;\r\n    }\r\n\r\n    public Tuple<int, int> GetCurentTileIndex()\r\n    {\r\n        return new Tuple<int, int>((int) (Math.Floor(Player.Pos.X) / TileSize),\r\n            (int) (Math.Floor(Player.Pos.Y) / TileSize));\r\n    }\r\n\r\n    public IEnumerable<Tuple<int,Rectangle>> GetDirectionLines()\r\n    {\r\n        DeltaAngle = FOV / RaysCounter;\r\n        ScaleX = WinWidth / RaysCounter;\r\n        var dist = RaysCounter / (2 * Math.Tan(FOV / 2));\r\n        var projCoeff = dist * TileSize;\r\n        \r\n        var currentAngle = Player.Angle - FOV / 2;\r\n        for (int ray = 0; ray < RaysCounter; ray++)\r\n        {\r\n            // var sinA = Math.Sin(currentAngle);\r\n            // var cosA = Math.Cos(currentAngle);\r\n            var flag = true;\r\n            for (int depth = 0; depth < MaxDepth; depth++)\r\n            {\r\n                var rayVector = Player.Pos + new Vector2(0, depth).RotateRadians(currentAngle);\r\n\r\n                if (Maze.Map[(int) (rayVector.X / TileSize), (int) (rayVector.Y / TileSize)].Value == TypeOfSpace.Wall)\r\n                {\r\n                    int c = (int) (255 / (1 + depth * depth * 0.0001));\r\n                    var projY = projCoeff / depth;\r\n                    yield return new Tuple<int, Rectangle>(c,new Rectangle(ray * ScaleX, (int) (WinHeight / 2 - projY / 2), ScaleX, (int) projY));\r\n                    flag = false;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            // if (flag)\r\n            // {\r\n            //     var rayVector = Player.Pos + new Vector2(0, MaxDepth).RotateRadians(currentAngle);\r\n            //\r\n            //     yield return new Point((int) rayVector.X, (int) rayVector.Y);\r\n            // }\r\n\r\n            currentAngle += DeltaAngle;\r\n        }\r\n    }\r\n\r\n    public Tuple<Point, Point> GetDirectionLine()\r\n    {\r\n        var point1 = new Point((int) Player.Pos.X, (int) Player.Pos.Y);\r\n        var v = new Vector2(0, -TileSize / 4).RotateRadians(Player.Angle);\r\n        var point2 = new Point(point1.X + (int) v.X, (int) (point1.Y + v.Y));\r\n        return Tuple.Create(point1, point2);\r\n    }\r\n}\r\n\r\npublic class Player\r\n{\r\n    public Vector2 Pos;\r\n    private bool OnJuppad;\r\n    public float Angle;\r\n\r\n    public Player(Vector2 pos, float angle)\r\n    {\r\n        Pos = pos;\r\n        Angle = angle;\r\n        OnJuppad = false;\r\n    }\r\n}\r\n\r\npublic static class VectorExt\r\n{\r\n    private const double DegToRad = Math.PI / 180;\r\n\r\n    public static Vector2 Rotate(this Vector2 v, double degrees)\r\n    {\r\n        return v.RotateRadians(degrees * DegToRad);\r\n    }\r\n\r\n    public static Vector2 RotateRadians(this Vector2 v, double radians)\r\n    {\r\n        var ca = (float) Math.Cos(radians);\r\n        var sa = (float) Math.Sin(radians);\r\n        return new Vector2(ca * v.X - sa * v.Y, sa * v.X + ca * v.Y);\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/TheMaze/Raycasting.cs b/TheMaze/Raycasting.cs
--- a/TheMaze/Raycasting.cs	(revision dd255ef14cc008283da2911c94a30f486dd6ac59)
+++ b/TheMaze/Raycasting.cs	(date 1650717880026)
@@ -1,5 +1,4 @@
 using System.Numerics;
-using System;
 
 namespace TheMaze;
 
@@ -86,14 +85,25 @@
 {
     public Vector2 Pos;
     private bool OnJuppad;
-    public float Angle;
+    public double Angle;
 
-    public Player(Vector2 pos, float angle)
+    public Player(Vector2 pos, double angle)
     {
         Pos = pos;
         Angle = angle;
         OnJuppad = false;
     }
+
+    public void TurnLeft(double delta) => Angle += delta;
+    public void TurnRight(double delta) => Angle -= delta;
+
+    public void Move(Vector2 direction, float delta, HashSet<Cell> wallSet, float cellSize)
+    {
+        var possiblePos = Pos + direction.RotateRadians(Angle) * delta;
+        //TODO: Обработка колизий
+
+        Pos += direction.RotateRadians(Angle) * delta;
+    }
 }
 
 public static class VectorExt
Index: .idea/.idea.TheMaze/.idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoGeneratedRunConfigurationManager\">\r\n    <projectFile>TheMaze/TheMaze.csproj</projectFile>\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"29693a07-433f-408a-b846-9045e5d8c4d2\" name=\"Changes\" comment=\"\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/.idea.TheMaze/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/.idea.TheMaze/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/TheMaze/Form1.cs\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/TheMaze/Form1.cs\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/TheMaze/Raycasting.cs\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/TheMaze/Raycasting.cs\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"GitSEFilterConfiguration\">\r\n    <file-type-list>\r\n      <filtered-out-file-type name=\"LOCAL_BRANCH\" />\r\n      <filtered-out-file-type name=\"REMOTE_BRANCH\" />\r\n      <filtered-out-file-type name=\"TAG\" />\r\n      <filtered-out-file-type name=\"COMMIT_BY_MESSAGE\" />\r\n    </file-type-list>\r\n  </component>\r\n  <component name=\"HighlightingSettingsPerFile\">\r\n    <setting file=\"file://$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/f14b2b38e41a86c6f3f927d5b5586e45cac2b8789c4c170faa6891a27ecf1d4/Vector2.cs\" root0=\"SKIP_HIGHLIGHTING\" />\r\n    <setting file=\"file://$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/4f857b4a4ba923116a566346f88433337e738b56c8de580dc7330b6f1fef1/Application.ComponentManager.cs\" root0=\"SKIP_HIGHLIGHTING\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"26xsr6a6WzgOxbeQGJTf7mQ3U2c\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"preferences.keymap\" />\r\n    <property name=\"vue.rearranger.settings.migration\" value=\"true\" />\r\n  </component>\r\n  <component name=\"RunManager\">\r\n    <configuration name=\"TheMaze\" type=\"DotNetProject\" factoryName=\".NET Project\">\r\n      <option name=\"EXE_PATH\" value=\"\" />\r\n      <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"\" />\r\n      <option name=\"PASS_PARENT_ENVS\" value=\"1\" />\r\n      <option name=\"USE_EXTERNAL_CONSOLE\" value=\"0\" />\r\n      <option name=\"USE_MONO\" value=\"0\" />\r\n      <option name=\"RUNTIME_ARGUMENTS\" value=\"\" />\r\n      <option name=\"PROJECT_PATH\" value=\"$PROJECT_DIR$/TheMaze/TheMaze.csproj\" />\r\n      <option name=\"PROJECT_EXE_PATH_TRACKING\" value=\"1\" />\r\n      <option name=\"PROJECT_ARGUMENTS_TRACKING\" value=\"1\" />\r\n      <option name=\"PROJECT_WORKING_DIRECTORY_TRACKING\" value=\"1\" />\r\n      <option name=\"PROJECT_KIND\" value=\"DotNetCore\" />\r\n      <option name=\"PROJECT_TFM\" value=\"\" />\r\n      <method v=\"2\">\r\n        <option name=\"Build\" />\r\n      </method>\r\n    </configuration>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"29693a07-433f-408a-b846-9045e5d8c4d2\" name=\"Changes\" comment=\"\" />\r\n      <created>1648376770021</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1648376770021</updated>\r\n      <workItem from=\"1648376778161\" duration=\"1558000\" />\r\n      <workItem from=\"1648388353596\" duration=\"9322000\" />\r\n      <workItem from=\"1648575295559\" duration=\"3074000\" />\r\n      <workItem from=\"1648628505334\" duration=\"291000\" />\r\n      <workItem from=\"1648628819160\" duration=\"291000\" />\r\n      <workItem from=\"1648629128997\" duration=\"1923000\" />\r\n      <workItem from=\"1648646998251\" duration=\"7628000\" />\r\n      <workItem from=\"1648665722998\" duration=\"199000\" />\r\n      <workItem from=\"1648665942416\" duration=\"1329000\" />\r\n      <workItem from=\"1648725425303\" duration=\"7226000\" />\r\n      <workItem from=\"1648792137761\" duration=\"3410000\" />\r\n      <workItem from=\"1648838554832\" duration=\"11954000\" />\r\n      <workItem from=\"1648989909022\" duration=\"2563000\" />\r\n      <workItem from=\"1648999365623\" duration=\"1184000\" />\r\n      <workItem from=\"1649007109684\" duration=\"339000\" />\r\n      <workItem from=\"1649167087779\" duration=\"1272000\" />\r\n      <workItem from=\"1649301008709\" duration=\"5229000\" />\r\n      <workItem from=\"1649348084397\" duration=\"55000\" />\r\n      <workItem from=\"1649465141374\" duration=\"1180000\" />\r\n      <workItem from=\"1649599973497\" duration=\"81000\" />\r\n      <workItem from=\"1649632421599\" duration=\"2864000\" />\r\n      <workItem from=\"1650211380635\" duration=\"1748000\" />\r\n      <workItem from=\"1650296469174\" duration=\"2715000\" />\r\n      <workItem from=\"1650363811360\" duration=\"3264000\" />\r\n      <workItem from=\"1650373118049\" duration=\"3378000\" />\r\n      <workItem from=\"1650440054311\" duration=\"3508000\" />\r\n      <workItem from=\"1650456610474\" duration=\"4007000\" />\r\n      <workItem from=\"1650466417330\" duration=\"53000\" />\r\n      <workItem from=\"1650475190179\" duration=\"3081000\" />\r\n      <workItem from=\"1650479353477\" duration=\"1969000\" />\r\n      <workItem from=\"1650557551402\" duration=\"1092000\" />\r\n      <workItem from=\"1650565206570\" duration=\"795000\" />\r\n      <workItem from=\"1650713664609\" duration=\"1789000\" />\r\n      <workItem from=\"1650716512396\" duration=\"1029000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"init\">\r\n      <created>1648661629654</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1648661629654</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"init\">\r\n      <created>1648906516114</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1648906516114</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"hotfix\">\r\n      <created>1648907567766</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1648907567766</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"maze gen completed\">\r\n      <created>1649000165589</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1649000165589</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"5\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"UnityCheckinConfiguration\" checkUnsavedScenes=\"true\" />\r\n  <component name=\"UnityProjectConfiguration\" hasMinimizedUI=\"false\" />\r\n  <component name=\"UnityUnitTestConfiguration\" currentTestLauncher=\"NUnit\" />\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <option name=\"CLEAR_INITIAL_COMMIT_MESSAGE\" value=\"true\" />\r\n    <MESSAGE value=\"init\" />\r\n    <MESSAGE value=\"hotfix\" />\r\n    <MESSAGE value=\"maze gen completed\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"maze gen completed\" />\r\n  </component>\r\n  <component name=\"XDebuggerManager\">\r\n    <watches-manager>\r\n      <configuration name=\"DotNetProject\">\r\n        <watch expression=\"currentCell\" />\r\n      </configuration>\r\n    </watches-manager>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/.idea.TheMaze/.idea/workspace.xml b/.idea/.idea.TheMaze/.idea/workspace.xml
--- a/.idea/.idea.TheMaze/.idea/workspace.xml	(revision dd255ef14cc008283da2911c94a30f486dd6ac59)
+++ b/.idea/.idea.TheMaze/.idea/workspace.xml	(date 1650717885206)
@@ -4,15 +4,21 @@
     <projectFile>TheMaze/TheMaze.csproj</projectFile>
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="29693a07-433f-408a-b846-9045e5d8c4d2" name="Changes" comment="">
-      <change beforePath="$PROJECT_DIR$/.idea/.idea.TheMaze/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/.idea.TheMaze/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/TheMaze/Form1.cs" beforeDir="false" afterPath="$PROJECT_DIR$/TheMaze/Form1.cs" afterDir="false" />
+    <list default="true" id="29693a07-433f-408a-b846-9045e5d8c4d2" name="Changes" comment="basic movement without collision">
       <change beforePath="$PROJECT_DIR$/TheMaze/Raycasting.cs" beforeDir="false" afterPath="$PROJECT_DIR$/TheMaze/Raycasting.cs" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
     <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
     <option name="LAST_RESOLUTION" value="IGNORE" />
+  </component>
+  <component name="Git.Settings">
+    <option name="RECENT_BRANCH_BY_REPOSITORY">
+      <map>
+        <entry key="$PROJECT_DIR$" value="master" />
+      </map>
+    </option>
+    <option name="RESET_MODE" value="HARD" />
   </component>
   <component name="GitSEFilterConfiguration">
     <file-type-list>
@@ -25,6 +31,8 @@
   <component name="HighlightingSettingsPerFile">
     <setting file="file://$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/f14b2b38e41a86c6f3f927d5b5586e45cac2b8789c4c170faa6891a27ecf1d4/Vector2.cs" root0="SKIP_HIGHLIGHTING" />
     <setting file="file://$APPLICATION_CONFIG_DIR$/resharper-host/SourcesCache/4f857b4a4ba923116a566346f88433337e738b56c8de580dc7330b6f1fef1/Application.ComponentManager.cs" root0="SKIP_HIGHLIGHTING" />
+    <setting file="mock://D:/!IT/C SHARP/TheMaze/TheMaze/TheMaze/Form1.cs" root0="SKIP_HIGHLIGHTING" />
+    <setting file="mock://D:/!IT/C SHARP/TheMaze/TheMaze/TheMaze/Raycasting.cs" root0="SKIP_HIGHLIGHTING" />
   </component>
   <component name="MarkdownSettingsMigration">
     <option name="stateVersion" value="1" />
@@ -147,7 +155,19 @@
       <map>
         <entry key="MAIN">
           <value>
-            <State />
+            <State>
+              <option name="FILTERS">
+                <map>
+                  <entry key="branch">
+                    <value>
+                      <list>
+                        <option value="no_raycasting" />
+                      </list>
+                    </value>
+                  </entry>
+                </map>
+              </option>
+            </State>
           </value>
         </entry>
       </map>
@@ -158,7 +178,9 @@
     <MESSAGE value="init" />
     <MESSAGE value="hotfix" />
     <MESSAGE value="maze gen completed" />
-    <option name="LAST_COMMIT_MESSAGE" value="maze gen completed" />
+    <MESSAGE value="ver 0.7" />
+    <MESSAGE value="basic movement without collision" />
+    <option name="LAST_COMMIT_MESSAGE" value="basic movement without collision" />
   </component>
   <component name="XDebuggerManager">
     <watches-manager>
